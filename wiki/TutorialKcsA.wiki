#summary Tutorial for embedding KcsA (PDB-ID: 1BL8)

= Tutorial for embedding KcsA =
*NOTE:* _We use GROMACS 4.5.5 for this tutorial._


== Protein preparation ==

Download the protein structure:
<code language="bash">wget "http://www.pdb.org/pdb/download/downloadFile.do?fileFormat=pdb&compression=NO&structureId=1bl8" -O 1bl8.pdb</code>

Remove water, potassium ions and the CONECT section using your preferred editor:
<code language="bash">gedit 1bl8.pdb</code>

Transfer the structure to the world of GROMACS:
<code language="bash">echo 1 | pdb2gmx -f 1bl8.pdb -o 1bl8.gro -ff gromos53a6 -p kcsa.top -i posre.kcsa</code>

touch empty.mdp
grompp -f empty.mdp -c 1bl8.gro -p kcsa.top -o test.tpr

editconf -f 1bl8.gro -o protein.gro -d 2
echo q | make_ndx -f protein.gro -o protein.ndx

~/lib/lambada/lambada_beta3/lambada --iprot protein.gro --ipndx protein.ndx --imemb pope-popc.17x17.gro --imndx pope-popc.17x17.ndx --ogro protein_pope-popc.gro --orient



# Remove water molecules.
gedit delwater.make_ndx.answers
make_ndx -f ../pope-popc/pope-popc.17x17.gro -o pope-popc.17x17.withwater.ndx <delwater.make_ndx.answers
echo 7 | editconf -f ../pope-popc/pope-popc.17x17.gro -n pope-popc.17x17.ndx -o pope-popc.17x17.gro
echo q | make_ndx -f pope-popc.17x17.gro -o pope-popc.17x17.ndx


cp ../pope-popc/*.itp .
gedit kcsa.top
cp ~/lib/inflategro/inflategro2b9/deflate.mdp .
# Combine for InflateGRO2 both lipid types to one group (14 | 15).
gedit make_ndx.answers
make_ndx -f protein_pope-popc.gro -o protein_pope-popc.ndx <make_ndx.answers
cp ~/lib/inflategro/inflategro2b9/deflate.mdp .

# Before executing InflateGRO2 with its internal defalting routine, you should check if your topology is compatible with coordinates, by using grompp.

~/lib/inflategro/inflategro2b9/inflategro2 -f protein_pope-popc.gro -n protein_pope-popc.ndx -p kcsa.top -m deflate.mdp -v